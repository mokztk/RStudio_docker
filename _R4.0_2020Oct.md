## About this image

- **rocker/tidyverse**
    - 現時点では `:4.0.1` で開発
    - 2020-10-10 に予定されている R 4.0.3 リリース後に `:4.0.2` の RSPM snapshot が固定されたら `:4.0.2` で作り直す
- 日本語ロケール
    - Ubuntu の `language-pack-ja`, `language-pack-ja-base`
    - 環境変数で `ja_JP.UTF-8` ロケールを指定
    - フォントは IPAex fonts と Noto Sans/Serif JP（[Google Fonts](https://fonts.google.com/) で配布されている日本語サブセット版）
- radian: A 21 century R console
    - https://github.com/randy3k/radian
    - Python 3
    - R に `reticulate` を入れて python と連携できるようにするかは保留
        - そのままでは、Python共有ライブラリや Pandas がないので動かない
        - `# apt-get install -y libpython3.8 python3-pandas`
        - `# echo "/usr/lib/x86_64-linux-gnu" > /etc/ld.so.conf.d/libpython3.8.conf`
        - `# ldconfig`
- TinyTeX
    - XeLaTeX + BXjscls で日本語PDFを作成するのに必要なパッケージも予めインストールしてしまう
    - `rocker/tidyverse:4.0.2` になったら、 `install_tinytex(..., version = "2020.09")` など固定する？
- R の頻用パッケージ
    - いつものものに、Causal Inference Slack で勧められたものをいくつか追加
    - https://docs.google.com/spreadsheets/d/175Q_lzNG7P6TT2k9rUzzweoaKdJS_OJZ3lWpUuTfcvc/edit#gid=0
    - 容量節約のため、インストール後にDLしたアーカイブは削除する（約300MB分）
- 環境変数 PASSWORD の仮設定
    - RStudio 1.3.x では `DISABLE_AUTH` がうまく機能していないよう
    - Docker Desktop など `-e PASSWORD=...` が設定できないGUIでも起動テストできるように

[rocker-org/rocker-versioned2](https://github.com/rocker-org/rocker-versioned2) のように、目的別のスクリプトを使って Dockerfile 自体は極力シンプルにしてみる。

Gist ではディレクトリが使えないので、"scripts__\*" は Dockerfile と同じ階層の "my_scripts" というディレクトリに "install_\*.sh" と改名して格納しておく。
改行コードが LF(UNIX) でないとエラーになるので注意。